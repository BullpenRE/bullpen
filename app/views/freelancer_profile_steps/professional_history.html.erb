<%= render '/nav_bar/profile_flow_nav_bar' %>
<div class="container pr-0 pl-0" style="max-width: 720px;"><%= render partial: 'shared/notice_and_alert' %></div>

<!--Progress Meter, Step 3-->
<div class="container mb-4">
  <div class="progress bg-white shadow-sm mx-auto" style="max-width: 700px;">
    <div class="progress-bar" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
  </div>
  <div class="text-secondary font-weight-bold my-1 text-center">50%</div>
</div>

<!--Content Card, Step 3-->
<div class="container">
  <div class="bp-card mb-5 mx-auto" style="max-width: 700px;">
    <%= form_for @freelancer_profile, url: wizard_path, method: :put do |f| %>
      <div class="text-center">
        <h2>Professional History</h2>
        <p class="mb-4">Tell us about your professional history.</p>
      </div>
      <div class="row">
        <div class="col-md">
          <div class="form-group mb-4">
            <label for="professionalTitleInput" class="h5">Professional Title</label>
            <%= f.text_field :professional_title, class: "form-control", id: "professionalTitleInput", placeholder: "e.g. Senior Analyst" %>
            <div class="error_title text-danger mb-1"></div>
          </div>
        </div>
      </div>
      <div class="form-group mb-5">
        <label for="professionalSummaryTextarea" class="h5">Professional Summary</label>
        <%= f.text_area :professional_summary, class: "form-control", id: "professionalSummaryTextarea", placeholder: "Describe your experience in a short elevator pitch",rows: "3", maxlength: "1000" %>
        <div class="error_summary text-danger mb-1"></div>
      </div>
      <div class="d-flex justify-content-between">
        <%= link_to 'Back', previous_wizard_path, class: "btn btn-link px-0" %>
        <%= f.submit 'Next', class: 'btn btn-primary submitProfessionalHistory' %>
      </div>
    <% end %>
  </div>
</div>

<script>
  $('.submitProfessionalHistory').on('click', (e) => {
    if ($('#professionalTitleInput').val().trim().length == 0) {
      e.preventDefault();
      $('.error_title').text('Please enter your title');
      $("#professionalTitleInput").addClass('error');
      setTimeout(() => {
        $('.error_title').text('');
        $("#professionalTitleInput").removeClass('error');
      }, 3000);
    }
    if ($('#professionalSummaryTextarea').val().trim().length == 0) {
      e.preventDefault();
      $('.error_summary').text('Please enter your professional summary');
      $("#professionalSummaryTextarea").addClass('error');
      setTimeout(() => {
        $('.error_summary').text('');
        $("#professionalSummaryTextarea").removeClass('error');
      }, 3000);
    }
  })
</script>
